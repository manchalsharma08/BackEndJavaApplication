trigger:
  branches:
     include:
      - main

pool: Default

stages:
- stage: ApplicationBuildStage
  displayName: Application Build Stage
  jobs:
  - job: BuildJob
    displayName: Application Build Job
    steps:
     - task: Docker@2
       inputs:
         containerRegistry: 'hello01SC'
         repository: 'my-java-app'
         command: 'buildAndPush'
         Dockerfile: 'DockerFile'
         tags: |
           $(Build.BuildId)
           latest

# - stage: deployImage
#   displayName: deploy to aks
#   jobs:
#   - job: 
#     steps:
#      - task: KubernetesManifest@1
#        inputs:
#          action: 'deploy'
#          connectionType: 'azureResourceManager'
#          azureSubscriptionConnection: 'ApplicationSC'
#          azureResourceGroup: 'MyRGc'
#          kubernetesCluster: 'myAKSCluster'
#          useClusterAdmin: true
